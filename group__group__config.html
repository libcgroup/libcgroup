<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcgroup: 5. Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcgroup
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">5. Configuration</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Configuration file</h2></td></tr>
<tr><td class="ititle" colspan="2"><p ><code>libcgroup</code> can mount and create control groups and set their parameters as specified in a configuration file.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>add this description?: These functions are mostly intended to be used by internal <code>libcgroup</code> tools, however they are fully supported and applications can benefit from them. </dd></dl>
</td></tr>
<tr class="memitem:ga8adfaca013333acf922a167f55b84140"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__config.html#ga8adfaca013333acf922a167f55b84140">cgroup_config_load_config</a> (const char *pathname)</td></tr>
<tr class="separator:ga8adfaca013333acf922a167f55b84140"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85b285712354faca495193075035938d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__config.html#ga85b285712354faca495193075035938d">cgroup_unload_cgroups</a> (void)</td></tr>
<tr class="separator:ga85b285712354faca495193075035938d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff77affa0b80ccf507b4b46cc0a8c085"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__config.html#gaff77affa0b80ccf507b4b46cc0a8c085">cgroup_config_unload_config</a> (const char *pathname, int flags)</td></tr>
<tr class="separator:gaff77affa0b80ccf507b4b46cc0a8c085"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d3a252b2c0c61c8f64cb1fc41e370ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__config.html#ga2d3a252b2c0c61c8f64cb1fc41e370ea">cgroup_config_set_default</a> (struct <a class="el" href="structcgroup.html">cgroup</a> *new_default)</td></tr>
<tr class="separator:ga2d3a252b2c0c61c8f64cb1fc41e370ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f8c41bb920565e674787fe6dabaef00"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__config.html#ga6f8c41bb920565e674787fe6dabaef00">cgroup_init_templates_cache</a> (char *pathname)</td></tr>
<tr class="separator:ga6f8c41bb920565e674787fe6dabaef00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89fe0d7943b29cc10d57b07abcdfa7b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__config.html#ga89fe0d7943b29cc10d57b07abcdfa7b5">cgroup_reload_cached_templates</a> (char *pathname)</td></tr>
<tr class="separator:ga89fe0d7943b29cc10d57b07abcdfa7b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga924860998c37da53cababe24163fc89b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__config.html#ga924860998c37da53cababe24163fc89b">cgroup_load_templates_cache_from_files</a> (int *file_index)</td></tr>
<tr class="separator:ga924860998c37da53cababe24163fc89b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb09024dc469a1a1ff8cdebd8d0ab422"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__config.html#gacb09024dc469a1a1ff8cdebd8d0ab422">cgroup_templates_cache_set_source_files</a> (struct <a class="el" href="structcgroup__string__list.html">cgroup_string_list</a> *tmpl_files)</td></tr>
<tr class="separator:gacb09024dc469a1a1ff8cdebd8d0ab422"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72066260cd31ceed7ecc1a648eba37f2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__config.html#ga72066260cd31ceed7ecc1a648eba37f2">cgroup_config_create_template_group</a> (struct <a class="el" href="structcgroup.html">cgroup</a> *<a class="el" href="structcgroup.html">cgroup</a>, char *template_name, int flags)</td></tr>
<tr class="separator:ga72066260cd31ceed7ecc1a648eba37f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga72066260cd31ceed7ecc1a648eba37f2" name="ga72066260cd31ceed7ecc1a648eba37f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga72066260cd31ceed7ecc1a648eba37f2">&#9670;&nbsp;</a></span>cgroup_config_create_template_group()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cgroup_config_create_template_group </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcgroup.html">cgroup</a> *&#160;</td>
          <td class="paramname"><em>cgroup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>template_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Physically create a new control group in kernel, based on given control group template and configuration file. If given template is not set in configuration file, then the procedure works create the control group using <a class="el" href="group__group__groups.html#gadb8e13df6064841d3c9707960f782fa7">cgroup_create_cgroup()</a> function</p>
<p >Templates are loaded using cgroup_load_templates_cache_from_files function, which must be preceded by cgroup_templates_cache_set_source_files call.</p>
<p >The flags can alter the behavior of this function: CGFLAG_USE_TEMPLATE_CACHE: Use cached templates instead of parsing the config file</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pathname</td><td>Name of the configuration file with template definitions </td></tr>
    <tr><td class="paramname">cgroup</td><td>Wanted control group - contains substitute name and wanted controllers. </td></tr>
    <tr><td class="paramname">template_name</td><td>Template name used for cgroup setting </td></tr>
    <tr><td class="paramname">flags</td><td>Bit flags to change the behavior </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8adfaca013333acf922a167f55b84140" name="ga8adfaca013333acf922a167f55b84140"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8adfaca013333acf922a167f55b84140">&#9670;&nbsp;</a></span>cgroup_config_load_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cgroup_config_load_config </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pathname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Load configuration file and mount and create control groups described there. See cgconfig.conf man page for format of the file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pathname</td><td>Name of the configuration file to load. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga2d3a252b2c0c61c8f64cb1fc41e370ea" name="ga2d3a252b2c0c61c8f64cb1fc41e370ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d3a252b2c0c61c8f64cb1fc41e370ea">&#9670;&nbsp;</a></span>cgroup_config_set_default()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cgroup_config_set_default </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcgroup.html">cgroup</a> *&#160;</td>
          <td class="paramname"><em>new_default</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Sets default permissions of groups created by subsequent <a class="el" href="group__group__config.html#ga8adfaca013333acf922a167f55b84140">cgroup_config_load_config()</a> calls. If a config file contains a 'default {}' section, the default permissions from the config file is then used.</p>
<p >Use <a class="el" href="group__group__groups.html#gad34c82ead174988d418f3dcb003aaca7">cgroup_new_cgroup()</a> to create a dummy group and <a class="el" href="group__group__groups.html#ga53b9e13e30660c805ab5773d69397a43">cgroup_set_uid_gid()</a> and <a class="el" href="group__group__groups.html#gaa0400f1ff2fba7fbb6db82d97039d92b">cgroup_set_permissions()</a> to set its permissions. Use NO_UID_GID instead of GID/UID and NO_PERMS instead of file/directory permissions to let kernel decide the default permissions where you don't want specific user and/or permissions. Kernel then uses current user/group and permissions from umask then.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_default</td><td>New default permissions from this group are copied to libcgroup internal structures. I.e., this group can be freed immediatelly after this function returns. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaff77affa0b80ccf507b4b46cc0a8c085" name="gaff77affa0b80ccf507b4b46cc0a8c085"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaff77affa0b80ccf507b4b46cc0a8c085">&#9670;&nbsp;</a></span>cgroup_config_unload_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cgroup_config_unload_config </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pathname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Delete all cgroups and unmount all mount points defined in specified config file.</p>
<p >The groups are either removed recursively or only the empty ones, based on given flags. Mount point are always umounted only if they are empty, regardless of any flags.</p>
<p >The groups are sorted before they are removed, so the removal of empty ones actually works (i.e. subgroups are removed first).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pathname</td><td>Name of the configuration file to unload. </td></tr>
    <tr><td class="paramname">flags</td><td>Combination of CGFLAG_DELETE_* flags, which indicate what and how to delete. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6f8c41bb920565e674787fe6dabaef00" name="ga6f8c41bb920565e674787fe6dabaef00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6f8c41bb920565e674787fe6dabaef00">&#9670;&nbsp;</a></span>cgroup_init_templates_cache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cgroup_init_templates_cache </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pathname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initializes the templates cache and load it from file pathname.</p>
<p >Initializes the templates cache. </p><dl class="section return"><dt>Returns</dt><dd>0 on success, &gt; 0 on error </dd></dl>

</div>
</div>
<a id="ga924860998c37da53cababe24163fc89b" name="ga924860998c37da53cababe24163fc89b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga924860998c37da53cababe24163fc89b">&#9670;&nbsp;</a></span>cgroup_load_templates_cache_from_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cgroup_load_templates_cache_from_files </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>file_index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Load the templates cache from files. Before calling this function, cgroup_templates_cache_set_source_files has to be called first. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_index</td><td>index of file which was unable to be parsed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, &gt; 0 on error </dd></dl>

</div>
</div>
<a id="ga89fe0d7943b29cc10d57b07abcdfa7b5" name="ga89fe0d7943b29cc10d57b07abcdfa7b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga89fe0d7943b29cc10d57b07abcdfa7b5">&#9670;&nbsp;</a></span>cgroup_reload_cached_templates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cgroup_reload_cached_templates </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pathname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Reloads the templates list from file pathname.</p>
<p >Reloads the templates list, using the given configuration file. </p><dl class="section return"><dt>Returns</dt><dd>0 on success, &gt; 0 on failure </dd></dl>

</div>
</div>
<a id="gacb09024dc469a1a1ff8cdebd8d0ab422" name="gacb09024dc469a1a1ff8cdebd8d0ab422"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacb09024dc469a1a1ff8cdebd8d0ab422">&#9670;&nbsp;</a></span>cgroup_templates_cache_set_source_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cgroup_templates_cache_set_source_files </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcgroup__string__list.html">cgroup_string_list</a> *&#160;</td>
          <td class="paramname"><em>tmpl_files</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Setting source files of templates. This function has to be called before any call of cgroup_load_templates_cache_from_files. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmpl_files</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga85b285712354faca495193075035938d" name="ga85b285712354faca495193075035938d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga85b285712354faca495193075035938d">&#9670;&nbsp;</a></span>cgroup_unload_cgroups()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cgroup_unload_cgroups </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Delete all control groups and unmount all hierarchies. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
