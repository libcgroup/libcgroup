<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcgroup: 7. Logging</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcgroup
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">7. Logging</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Logging</h2></td></tr>
<tr><td class="ititle" colspan="2"><p>Libcgroup allows applications to register a callback function which libcgroup will call when it wants to log something. Each log message has associated a log level. As described in previous chapter, most libcgroup functions return an error code, which described root cause of the failure and log messages might provide further details about these failures and other notable events.</p>
<dl class="section user"><dt></dt><dd>The logging callback can be set at any time, but setting the callback before any other libcgroup function (including cgroup_init()) is highly recommended. If no logger is set before cgroup_init() is called, default logger is automatically set, logging CGROUP_LOG_ERROR messages to stdout.</dd></dl>
<dl class="section user"><dt>Setting log level</dt><dd>Some of the functions below set the log level as integer. Application can set directly a value of enum <a class="el" href="group__group__log.html#ga98b7aea5d23411e70c7e3da54d90233a">cgroup_log_level</a> or use value <code>-1</code> to set the log level automatically. In this case, libcgroup inspects environment variable <code>CGROUP_LOGLEVEL</code> if it is set and contains any of these values: <code>ERROR</code>, <code>WARNING</code>, <code>INFO</code>, <code>DEBUG</code> or integer number representing value from enum <a class="el" href="group__group__log.html#ga98b7aea5d23411e70c7e3da54d90233a">cgroup_log_level</a>. If <code>CGROUP_LOGLEVEL</code> is not set or its value is not valid, <code>CGROUP_LOG_ERROR</code> is set as default log level.</dd></dl>
<dl class="section user"><dt>Example:</dt><dd>Following short example shows custom libcgroup logger sending all log messages to <code>stderr</code>: <div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> my_logger(<span class="keywordtype">void</span> *userdata, <span class="keywordtype">int</span> level, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, va_list ap)</div>
<div class="line">{</div>
<div class="line"> vfprintf(stderr, fmt, ap);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">int</span> ret;</div>
<div class="line"> </div>
<div class="line"> <a class="code hl_function" href="group__group__log.html#ga76d7032206f9b9d1c0be1a71a68c43d0">cgroup_set_logger</a>(my_logger, -1, NULL);</div>
<div class="line"> ret = cgroup_init();</div>
<div class="line"> <span class="keywordflow">if</span> (ret) {</div>
<div class="line">    ...</div>
<div class="line"> }</div>
<div class="line"> ...</div>
<div class="ttc" id="agroup__group__log_html_ga76d7032206f9b9d1c0be1a71a68c43d0"><div class="ttname"><a href="group__group__log.html#ga76d7032206f9b9d1c0be1a71a68c43d0">cgroup_set_logger</a></div><div class="ttdeci">void cgroup_set_logger(cgroup_logger_callback logger, int loglevel, void *userdata)</div><div class="ttdef"><b>Definition</b> log.c:42</div></div>
</div><!-- fragment --> </dd></dl>
</td></tr>
<tr class="memitem:ga98b7aea5d23411e70c7e3da54d90233a" id="r_ga98b7aea5d23411e70c7e3da54d90233a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__log.html#ga98b7aea5d23411e70c7e3da54d90233a">cgroup_log_level</a> { <br />
&#160;&#160;<a class="el" href="group__group__log.html#gga98b7aea5d23411e70c7e3da54d90233aa915b87fe26cc45572e40508dc6d62e88">CGROUP_LOG_CONT</a> = 0
, <a class="el" href="group__group__log.html#gga98b7aea5d23411e70c7e3da54d90233aa4dd44215cd3553e79dbf91eb9ca418a2">CGROUP_LOG_ERROR</a>
, <a class="el" href="group__group__log.html#gga98b7aea5d23411e70c7e3da54d90233aaa99ec9e854a543901bddf854d1960057">CGROUP_LOG_WARNING</a>
, <a class="el" href="group__group__log.html#gga98b7aea5d23411e70c7e3da54d90233aad66ab51dba078ffc3b1c6d397053f9e2">CGROUP_LOG_INFO</a>
, <br />
&#160;&#160;<a class="el" href="group__group__log.html#gga98b7aea5d23411e70c7e3da54d90233aa86b4157fb38d9f8053c6b7429bd26c72">CGROUP_LOG_DEBUG</a>
<br />
 }</td></tr>
<tr class="separator:ga98b7aea5d23411e70c7e3da54d90233a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa1da90e8ef64cc58c7ad523bdd6679e6" id="r_gaa1da90e8ef64cc58c7ad523bdd6679e6"><td class="memItemLeft" align="right" valign="top"><a id="gaa1da90e8ef64cc58c7ad523bdd6679e6" name="gaa1da90e8ef64cc58c7ad523bdd6679e6"></a>
typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><b>cgroup_logger_callback</b>) (void *userdata, int level, const char *fmt, va_list ap)</td></tr>
<tr class="separator:gaa1da90e8ef64cc58c7ad523bdd6679e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76d7032206f9b9d1c0be1a71a68c43d0" id="r_ga76d7032206f9b9d1c0be1a71a68c43d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__log.html#ga76d7032206f9b9d1c0be1a71a68c43d0">cgroup_set_logger</a> (cgroup_logger_callback logger, int loglevel, void *userdata)</td></tr>
<tr class="separator:ga76d7032206f9b9d1c0be1a71a68c43d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab1457ce518dcde0b9f3c14ec9efa2de7" id="r_gab1457ce518dcde0b9f3c14ec9efa2de7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__log.html#gab1457ce518dcde0b9f3c14ec9efa2de7">cgroup_set_default_logger</a> (int loglevel)</td></tr>
<tr class="separator:gab1457ce518dcde0b9f3c14ec9efa2de7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac5fe2352800ff62465a5abe649d5b8c" id="r_gaac5fe2352800ff62465a5abe649d5b8c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__log.html#gaac5fe2352800ff62465a5abe649d5b8c">cgroup_set_loglevel</a> (int loglevel)</td></tr>
<tr class="separator:gaac5fe2352800ff62465a5abe649d5b8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga75c24d59f2fcf3320575a40befcd66d4" id="r_ga75c24d59f2fcf3320575a40befcd66d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__log.html#ga75c24d59f2fcf3320575a40befcd66d4">cgroup_get_loglevel</a> (void)</td></tr>
<tr class="separator:ga75c24d59f2fcf3320575a40befcd66d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab514ad5d83422ddfe479bdf651e80958" id="r_gab514ad5d83422ddfe479bdf651e80958"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__log.html#gab514ad5d83422ddfe479bdf651e80958">cgroup_log</a> (int loglevel, const char *fmt,...)</td></tr>
<tr class="separator:gab514ad5d83422ddfe479bdf651e80958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa364a06aee0e99228a1e6a26b25a9794" id="r_gaa364a06aee0e99228a1e6a26b25a9794"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__log.html#gaa364a06aee0e99228a1e6a26b25a9794">cgroup_parse_log_level_str</a> (const char *levelstr)</td></tr>
<tr class="separator:gaa364a06aee0e99228a1e6a26b25a9794"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga98b7aea5d23411e70c7e3da54d90233a" name="ga98b7aea5d23411e70c7e3da54d90233a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga98b7aea5d23411e70c7e3da54d90233a">&#9670;&#160;</a></span>cgroup_log_level</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__group__log.html#ga98b7aea5d23411e70c7e3da54d90233a">cgroup_log_level</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Level of importance of a log message. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga98b7aea5d23411e70c7e3da54d90233aa915b87fe26cc45572e40508dc6d62e88" name="gga98b7aea5d23411e70c7e3da54d90233aa915b87fe26cc45572e40508dc6d62e88"></a>CGROUP_LOG_CONT&#160;</td><td class="fielddoc"><p>Continue printing the log message, with the previous log level. Used to print log messages without the line break. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga98b7aea5d23411e70c7e3da54d90233aa4dd44215cd3553e79dbf91eb9ca418a2" name="gga98b7aea5d23411e70c7e3da54d90233aa4dd44215cd3553e79dbf91eb9ca418a2"></a>CGROUP_LOG_ERROR&#160;</td><td class="fielddoc"><p>Something serious happened and libcgroup failed to perform requested operation. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga98b7aea5d23411e70c7e3da54d90233aaa99ec9e854a543901bddf854d1960057" name="gga98b7aea5d23411e70c7e3da54d90233aaa99ec9e854a543901bddf854d1960057"></a>CGROUP_LOG_WARNING&#160;</td><td class="fielddoc"><p>Something bad happened but libcgroup recovered from the error. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga98b7aea5d23411e70c7e3da54d90233aad66ab51dba078ffc3b1c6d397053f9e2" name="gga98b7aea5d23411e70c7e3da54d90233aad66ab51dba078ffc3b1c6d397053f9e2"></a>CGROUP_LOG_INFO&#160;</td><td class="fielddoc"><p>Something interesting happened and the message might be useful to the user. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga98b7aea5d23411e70c7e3da54d90233aa86b4157fb38d9f8053c6b7429bd26c72" name="gga98b7aea5d23411e70c7e3da54d90233aa86b4157fb38d9f8053c6b7429bd26c72"></a>CGROUP_LOG_DEBUG&#160;</td><td class="fielddoc"><p>Debugging messages useful to libcgroup developers. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga75c24d59f2fcf3320575a40befcd66d4" name="ga75c24d59f2fcf3320575a40befcd66d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga75c24d59f2fcf3320575a40befcd66d4">&#9670;&#160;</a></span>cgroup_get_loglevel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cgroup_get_loglevel </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Retrieve the current loglevel. </p><dl class="section return"><dt>Returns</dt><dd>the current loglevel from with libcgroup </dd></dl>

</div>
</div>
<a id="gab514ad5d83422ddfe479bdf651e80958" name="gab514ad5d83422ddfe479bdf651e80958"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab514ad5d83422ddfe479bdf651e80958">&#9670;&#160;</a></span>cgroup_log()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cgroup_log </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>loglevel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Libcgroup log function. This is for applications which are too lazy to set up their own complex logging and miss-use libcgroup for that purpose. I.e. this function should be used only by simple command-line tools. This logging automatically benefits from CGROUP_LOGLEVEL env. variable. </p>

</div>
</div>
<a id="gaa364a06aee0e99228a1e6a26b25a9794" name="gaa364a06aee0e99228a1e6a26b25a9794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa364a06aee0e99228a1e6a26b25a9794">&#9670;&#160;</a></span>cgroup_parse_log_level_str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cgroup_parse_log_level_str </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>levelstr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Parse levelstr string for information about desired loglevel. The levelstr is usually a value of the CGROUP_LOGLEVEL environment variable. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">levelstr</td><td>String containing desired loglevel. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab1457ce518dcde0b9f3c14ec9efa2de7" name="gab1457ce518dcde0b9f3c14ec9efa2de7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab1457ce518dcde0b9f3c14ec9efa2de7">&#9670;&#160;</a></span>cgroup_set_default_logger()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cgroup_set_default_logger </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>loglevel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set libcgroup logging to stdout. All messages with the given loglevel or below will be sent to standard output. Previous logger set by <a class="el" href="group__group__log.html#ga76d7032206f9b9d1c0be1a71a68c43d0">cgroup_set_logger()</a> is replaced.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loglevel</td><td>The log level. Use value -1 to automatically discover the level from CGROUP_LOGLEVEL environment variable. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga76d7032206f9b9d1c0be1a71a68c43d0" name="ga76d7032206f9b9d1c0be1a71a68c43d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga76d7032206f9b9d1c0be1a71a68c43d0">&#9670;&#160;</a></span>cgroup_set_logger()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cgroup_set_logger </td>
          <td>(</td>
          <td class="paramtype">cgroup_logger_callback&#160;</td>
          <td class="paramname"><em>logger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>loglevel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set libcgroup logging callback. All log messages with equal or lower log level will be sent to the application's callback. There can be only one callback logger set, the previous callback is replaced with the new one by calling this function. Use NULL as the logger callback to completely disable libcgroup logging.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">logger</td><td>The callback. </td></tr>
    <tr><td class="paramname">loglevel</td><td>The log level. Use value -1 to automatically discover the level from CGROUP_LOGLEVEL environment variable. </td></tr>
    <tr><td class="paramname">userdata</td><td>Application's data which will be provided back to the callback. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaac5fe2352800ff62465a5abe649d5b8c" name="gaac5fe2352800ff62465a5abe649d5b8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac5fe2352800ff62465a5abe649d5b8c">&#9670;&#160;</a></span>cgroup_set_loglevel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cgroup_set_loglevel </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>loglevel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Change current loglevel. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loglevel</td><td>The log level. Use value -1 to automatically discover the level from CGROUP_LOGLEVEL environment variable. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
